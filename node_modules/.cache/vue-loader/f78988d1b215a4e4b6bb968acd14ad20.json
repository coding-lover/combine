{"remainingRequest":"/data/www/kit/www/Public/kit-test/node_modules/vue-loader/lib/index.js??vue-loader-options!/data/www/kit/www/Public/kit-test/src/components/common/PhpTestUnit.vue?vue&type=style&index=0&id=699cbd9a&scoped=true&lang=css&","dependencies":[{"path":"/data/www/kit/www/Public/kit-test/src/components/common/PhpTestUnit.vue","mtime":1610358680986},{"path":"/data/www/kit/www/Public/kit-test/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/data/www/kit/www/Public/kit-test/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/data/www/kit/www/Public/kit-test/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/data/www/kit/www/Public/kit-test/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/data/www/kit/www/Public/kit-test/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nh1{\n    text-align: center;\n    margin: 30px 0;\n}\np{\n    line-height: 30px;\n    margin-bottom: 10px;\n    text-indent: 2em;\n}\n.logout{\n    color: #409EFF;\n}\n.mt-5 {\n    margin-top: 5px;\n}\n.mt-10 {\n    margin-top: 5px;\n}\n\n",{"version":3,"sources":["PhpTestUnit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PhpTestUnit.vue","sourceRoot":"src/components/common","sourcesContent":["<template>\r\n    <div class=\"container\">\r\n        <h3>{{title}}</h3>\r\n        <el-collapse accordion>\r\n            <el-collapse-item>\r\n                <template slot=\"title\">\r\n                    {{func}} <i class=\"header-icon el-icon-document\"></i>\r\n                </template>\r\n                <my-prism  :plugins=\"plugins\" style=\"height: 300px;overflow-y: auto\"><slot name=\"u-code\"></slot></my-prism>\r\n            </el-collapse-item>\r\n        </el-collapse>\r\n\r\n        <form-create v-model=\"fApi\" :rule=\"fRules\" :option=\"fOptions\" class=\"mt-10\"></form-create>\r\n        <el-collapse value=\"1\" accordion>\r\n            <el-collapse-item name=\"1\">\r\n                <template slot=\"title\" >\r\n                    结果 <i class=\"header-icon el-icon-document\"></i>\r\n                </template>\r\n                <json-viewer :value=\"result\" :expand-depth=\"5\" boxed></json-viewer>\r\n            </el-collapse-item>\r\n        </el-collapse>\r\n    </div>\r\n</template>\r\n\r\n\r\n<script>\r\n    import MyPrism from \"./MyPrism\";\r\n    export default {\r\n        props: {\r\n            title: {\r\n                type: String,\r\n                default: '',\r\n            },\r\n            func: {\r\n                type: String,\r\n                default: '',\r\n            },\r\n            rules: {\r\n                type: Array,\r\n                default: function() {\r\n                    return [];\r\n                },\r\n            },\r\n            options: {\r\n                type: Object,\r\n                default: function() {\r\n                    return {};\r\n                },\r\n            },\r\n        },\r\n        data () {\r\n            return {\r\n                plugins: ['line-numbers'],\r\n                targetFunc: null,\r\n                result: {},\r\n\r\n                //form-create\r\n                fApi: {},\r\n                fOptions: {},\r\n                fRules: [],\r\n                defaultRules: [\r\n                    {\r\n                        type: 'el-button',\r\n                        field: 'submitBtn',\r\n                        on: {\r\n                            click: () => {\r\n                                //TODO 提交表单\r\n                                this.onSubmit(this.fApi);\r\n                            }\r\n                        },\r\n                        props: {\r\n                            type: 'primary',\r\n                        },\r\n                        col: {\r\n                            //span:3,\r\n                            //spush: 1\r\n                        },\r\n                        children: ['提交']\r\n\r\n                    }\r\n                ],\r\n                defaultOptions: {\r\n                    form: {\r\n                        //行内表单模式\r\n                        inline: true,\r\n                        labelWidth: 'auto',\r\n                    },\r\n                    row: {\r\n                        //justify: 'start',\r\n                    },\r\n                    submitBtn: false,\r\n                },\r\n            }\r\n        },\r\n        components: {\r\n            MyPrism\r\n        },\r\n        computed: {\r\n        },\r\n        created() {\r\n            this.fRules.push(...this.rules, ...this.defaultRules);\r\n            this.fOptions = Object.assign(this.options, this.defaultOptions);\r\n        },\r\n        mounted() {\r\n\r\n\r\n        },\r\n        methods: {\r\n            enableSubmit(flag = true) {\r\n                this.fApi.disabled(!flag, 'submitBtn');\r\n            },\r\n            onSubmit(fApi) {\r\n                fApi.validate((valid) => {\r\n                    if(!valid) {\r\n                        return false;\r\n                    }\r\n\r\n                    if(!this.checkFunc(this.func))\r\n                    {\r\n                        return false;\r\n                    }\r\n\r\n                    console.log(this.targetFunc);\r\n\r\n                    this.enableSubmit(false);\r\n                    this.targetFunc(fApi.form).then(res => {\r\n                        console.log(res);\r\n                        if(res.code) {\r\n                            this.$notify({\r\n                                title: '错误',\r\n                                message: `#${this.$props.func}获取失败 <br /> ${res.msg}`,\r\n                                type: 'error'\r\n                            });\r\n                            this.result = res.payload;\r\n                            return false;\r\n                        }\r\n\r\n                        this.result = res.payload;\r\n                        this.$notify({\r\n                            title: '成功',\r\n                            message: `#${this.$props.func}  获取成功`,\r\n                            type: 'success'\r\n                        });\r\n                    }).finally(() => {\r\n                        this.enableSubmit(true);\r\n                    });\r\n                });\r\n            },\r\n\r\n            checkFunc(func) {\r\n                let tmp = require('../../api/accounts');\r\n                if(!tmp || !tmp[func])\r\n                {\r\n                    this.targetFunc = null;\r\n                    this.$notify.error({title: '错误', message: func + ' 方法找不到！'});\r\n                    return false;\r\n                }\r\n\r\n                this.targetFunc = tmp[func];\r\n                return true;\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    h1{\r\n        text-align: center;\r\n        margin: 30px 0;\r\n    }\r\n    p{\r\n        line-height: 30px;\r\n        margin-bottom: 10px;\r\n        text-indent: 2em;\r\n    }\r\n    .logout{\r\n        color: #409EFF;\r\n    }\r\n    .mt-5 {\r\n        margin-top: 5px;\r\n    }\r\n    .mt-10 {\r\n        margin-top: 5px;\r\n    }\r\n\r\n</style>\r\n"]}]}