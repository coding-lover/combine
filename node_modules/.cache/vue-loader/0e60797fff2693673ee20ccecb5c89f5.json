{"remainingRequest":"/data/www/combine/node_modules/vue-loader/lib/index.js??vue-loader-options!/data/www/combine/src/components/page/Combine.vue?vue&type=script&lang=js&","dependencies":[{"path":"/data/www/combine/src/components/page/Combine.vue","mtime":1665545402548},{"path":"/data/www/combine/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/data/www/combine/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/data/www/combine/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport ElTableDraggable from 'element-ui-el-table-draggable';\n\nexport default {\n    data() {\n        return {\n            activeName: 'first',\n            fileList: [],\n            tmpFileNames: [],\n            nodeList: [],\n            nodeNum: 2,\n            replaceHis: [],\n            specialFileList: [],\n            specialKey: 99,\n            form: {\n                fileHeader: '',\n                fileFooter: '',\n                fileName: '',\n                fileSuffix: \".nc\",\n                fileSuffixOptions: [\n                    {value: \".nc\", name: \".nc\"},\n                    {value: \".pim\", name: \".pim\"},\n                ],\n                ready: true,\n                delivery: true,\n            },\n            dragOptions:{\n                animation: 120,\n                scroll: true,\n                group: 'sortlist',\n                ghostClass: 'ghost-style'\n            },\n            curId: 0,\n            combineFileList : [\n            ],\n\n            dragList: [],\n            dragConfig: {\n                optionVal: 0,\n                options: [\n                    {value: 0, label: \"文件头删除行数\"},\n                    {value: 1, label: \"文件尾删除行数\"}\n                ],\n\n                setVal: 1,\n            },\n\n            formRules: {\n                fileHeader: [\n                    { required: true, message: '请输入文件头', trigger: 'blur' },\n                ],\n                fileFooter: [\n                    { required: true, message: '请输入文件尾', trigger: 'change' }\n                ],\n                fileName: [\n                    { required: true, message: '请输入完整文件名', trigger: 'change', validator: (rule, value, callback) => {\n                        if(!this.form.fileName) {\n                            return callback(new Error('请输入完整文件名'));\n                        }\n\n                        if(this.form.fileSuffix === '') {\n                            return callback(new Error('请选择文件后缀'));\n                        }\n\n                        callback();\n                    }}\n                ],\n                fileSuffix: [\n                    { required: true, message: '请选择文件后缀', trigger: 'change' }\n                ],\n            }\n        };\n    },\n    components:{\n        ElTableDraggable\n    },\n    computed: {\n        replaceFlag: function () {\n            return (idx) => {\n                if (!this.nodeList.hasOwnProperty(idx)) {\n                    return false;\n                }\n\n                let node = this.nodeList[idx];\n                let replaceKey = this.createReplaceKey(node.search, node.replace);\n                return node.replaceHis.indexOf(replaceKey) != -1;\n            };\n        },\n        totalNum: function() {\n            let num = 0;\n            this.nodeList.map(node => {\n                num += node.fileList.length;\n            });\n\n            return num;\n        },\n        specialNum: function() {\n            return this.specialFileList.length;\n        },\n        getFileList: {\n            get() {\n                let fileList = [];\n\n                if(this.form.delivery) {\n                    this.nodeList.map((node, nodeIdx) => {\n                        node.fileList.map((file, fileIdx) => {\n                            file.nodeIdx = nodeIdx;\n                            file.fileIdx = fileIdx;\n                            fileList.push(file);\n                        });\n                    });\n                } else {\n                    //debugger\n                    fileList.push(...this.specialFileList);\n                }\n\n                return fileList;\n            },\n            set(value) {\n                console.warn(value)\n            },\n        },\n        getFileBadge: function() {\n            return (rawName) => {\n                return rawName + (this.totalNum > 0 ? '<el-badge value=\"' + this.totalNum + '\" class=\"large-btn\"  />' : '');\n            };\n        },\n    },\n    watch: {\n        //nodeList: {\n        // immediate: true,\n        // //deep: true,\n        // handler(nodeList) {\n        //\n        // }\n        //},\n    },\n    mounted() {\n        this.initNodeList();\n    },\n\n    methods: {\n        combineFile() {\n            this.$refs['form'].validate((valid) => {\n                if (!valid) {\n                    return false;\n                }\n\n                let rawList = [];\n                let rawIds = [];\n                this.nodeList.map(node => {\n                    node.fileList.map(file => {\n                        rawIds.push(file.id);\n                        rawList.push(file);\n                    });\n                });\n\n                rawList.push(...this.specialFileList);\n\n                if(this.dragList.length != rawList.length) {\n                    this.dragList = rawList;\n                }\n\n                if(this.dragList.length == 0) {\n                    this.$message.info('请上传要合并的文件');\n                    return false;\n                }\n\n                let promiseList = [];\n                this.dragList.map(file => {\n                    //debugger\n                    if(this.form.delivery && rawIds.indexOf(file.id) == -1) {\n                        return false;\n                    }\n\n                    if(!this.form.delivery && rawIds.indexOf(file.id) != -1) {\n                        return false;\n                    }\n\n                    let p = this.readFile(file, res => {\n                        res = res.split(\"\\n\").filter(res => res);\n                        res.splice(0, file.headerDeleteLine);\n                        res.splice(res.length - file.footerDeleteLine, file.footerDeleteLine);\n                        return res.join(\"\\n\");\n                    });\n\n                    promiseList.push(p);\n                });\n\n                if(promiseList.length == 0) {\n                    this.$message.info('请上传文件');\n                    return false;\n                }\n\n                this.form.ready = false;\n                Promise.all([...promiseList]).then(res => {\n                    console.log(res)\n                    res.unshift(this.form.fileHeader);\n                    res.push(this.form.fileFooter);\n                    res = res.filter(res => res);\n                    res = res.join(\"\\n\");\n\n                    console.log(res)\n                    this.form.ready = true;\n                    this.downloadFileByContent(res, this.form.fileName + this.form.fileSuffix);\n                });\n\n                console.log('content')\n            });\n        },\n\n        test(flag) {\n            return new Promise((resolve, reject) => {\n                let time = Math.ceil(Math.random() * 10000);\n                console.warn('执行 ' + flag);\n                setTimeout(() => {\n                    resolve(time + '-' + flag);\n                }, time);\n            });\n        },\n\n        readFile(file, callback) {\n            return new Promise((resolve, reject) => {\n                let fileReader = new FileReader();\n                fileReader.onloadend =  (event) => {\n\n                    resolve(callback(event.target.result));\n                };\n\n                fileReader.readAsText(file.raw);\n            });\n        },\n        fileConfigAdd() {\n            this.dispatchFileConfig(true);\n        },\n\n        fileConfigReduce() {\n            this.dispatchFileConfig(false);\n        },\n\n        dispatchFileConfig(isAdd = true) {\n            if(this.form.delivery) {\n                this.nodeList.map(node => {\n                    node.fileList.map(file => {\n                        this.doUpdateDeletedLine(file, isAdd);\n                    });\n                });\n            } else {\n                this.specialFileList.map(file => {\n                    this.doUpdateDeletedLine(file, isAdd);\n                });\n            }\n        },\n\n        doUpdateDeletedLine(file, isAdd = true) {\n            let key = this.dragConfig.optionVal == 0 ? 'headerDeleteLine' : 'footerDeleteLine';\n            file[key] = file[key] == undefined ? 0 : file[key];\n            if(isAdd) {\n                file[key] += this.dragConfig.setVal;\n            } else {\n                file[key] -= this.dragConfig.setVal;\n            }\n\n            file[key] = file[key] < 0 ? 0 : file[key];\n            this.updateDeletedLine(file.id, key, file[key]);\n        },\n\n        updateDeletedLine(id, mode, value) {\n            let key = this.createDeleteKey(id, mode);\n            this.$refs[key].setCurrentValue(value);\n        },\n\n        dragChange(log) {\n            this.dragList = log.list;\n            console.log(log)\n\n        },\n        formReset() {\n            this.$refs.form.resetFields();\n            for(let key in this.form) {\n                if(key == 'fileSuffixOptions') {\n                    continue;\n                }\n\n                if(this.form.hasOwnProperty(key)) {\n                    this.form[key] = key == 'ready' || key == \"delivery\" ? true : '';\n                }\n            }\n        },\n        removeHandle(event){\n            console.log(event);\n            this.$message.success(`从 ${event.from.id} 移动到 ${event.to.id} `);\n        },\n        addNode() {\n            this.nodeList.push(this.initNode());\n        },\n\n        batchReplace() {\n            this.nodeList.map((node, idx) => {\n                this.doReplace(idx);\n            });\n        },\n\n        batchDownload() {\n            this.nodeList.map((node, idx) => {\n                this.downloadFile(idx);\n            });\n        },\n\n        getReplaceHis(idx) {\n            if(this.nodeList[idx].replaceHis.length == 0) {\n                this.$message.info('没有替换历史');\n                return false;\n            }\n\n            let hisHtml = '';\n            this.nodeList[idx].replaceHis.map((his, key) => {\n                hisHtml += `<p>#${key} ${his}<p>`;\n            });\n\n            this.$alert(hisHtml, '替换历史', {\n                dangerouslyUseHTMLString: true\n            });\n        },\n\n        doReplace(idx) {\n\n            if(this.nodeList[idx].fileList.length == 0) {\n                this.$message.info(\"请先上传文件！\");\n                return false;\n            }\n\n            let node = this.nodeList[idx];\n            let replaceKey = this.createReplaceKey(node.search, node.replace);\n            node.replaceHis.push(replaceKey);\n\n            node.fileList.map(file => {\n                let fileReader = new FileReader();\n                fileReader.onload =  (event) => {\n                    //console.log(event.target.result)\n                    let content = event.target.result.replaceAll(node.search, node.replace);\n                    console.info(\"replace: \" + content);\n                    file.raw = new File([content], file.name, {\n                        name: file.name,\n                        size: content.length,\n                        type: file.type,\n                        lastModified: file.lastModified,\n                    });\n\n                    this.$message({\n                        message: file.name + ' 替换成功',\n                        type: 'success'\n                    });\n                };\n\n                fileReader.readAsText(file.raw);\n\n            });\n\n            this.$message({\n                message: idx + '-' + replaceKey,\n                type: 'success'\n            });\n        },\n\n        downloadFileByContent(content, fileName) {\n           let file = new File([content], fileName);\n           this.downloadBlob(URL.createObjectURL(file), fileName);\n        },\n\n        downloadFile(idx) {\n            if(!this.nodeList.hasOwnProperty(idx)) {\n                this.$message.info(\"请上传文件！\");\n                return false;\n            }\n\n            this.nodeList[idx].fileList.map(file => {\n                let url = URL.createObjectURL(file.raw);\n                let name = file.name.substring(0, file.name.lastIndexOf(\".\"));\n                let suffix = file.name.substring(file.name.lastIndexOf(\".\"));\n                if(this.nodeList[idx].replaceHis.length > 0) {\n                    name += \"(\" + this.nodeList[idx].replaceHis.join(\",\") + \")\";\n                }\n\n                console.warn(file.name)\n                this.downloadBlob(url, name + suffix);\n            });\n        },\n        initNodeList() {\n            for (let i = 0; i < this.nodeNum; i++) {\n                this.nodeList.push(this.initNode());\n            }\n        },\n        initNode() {\n            return {\n                search: '',\n                replace: '',\n                fileNum: 0,\n                fileList: [\n                    //{name: \"test.json\", uid: 55555, id:1}\n                ],\n                isReplace: false,\n                replaceHis: [],\n            };\n        },\n        handleClick(tab, event) {\n            console.log(tab, event);\n        },\n\n        handleRemove(idx) {\n            return (file, fileList) => {\n                console.log(file, fileList)\n                for(var key in fileList) {\n                    if(file.name == fileList[key].name) {\n                        return false;\n                    }\n                }\n\n                if(idx == this.specialKey) {\n                    this.specialFileList = fileList;\n                } else {\n                    this.nodeList[idx].fileNum--;\n                    this.nodeList[idx].fileList = fileList;\n\n                    if(fileList.length == 0) {\n                        this.nodeList[idx].replaceHis = [];\n                    }\n                }\n\n                let nameIdx = this.tmpFileNames[idx].indexOf(file.name);\n                delete this.tmpFileNames[idx][nameIdx];\n            };\n        },\n\n        handlePreview(file) {\n            console.log(file);\n        },\n        handleProgress(event, file, fileList) {\n            console.log(event, file);\n        },\n\n        myHandleChange(idx) {\n            return (file, fileList) => {\n                if (!this.tmpFileNames.hasOwnProperty(idx)) {\n                    this.tmpFileNames[idx] = [];\n                }\n\n                if (this.tmpFileNames[idx].indexOf(file.name) != -1) {\n                    this.$message.warning(\"出现重复文件： \" + file.name + \", 取消当前上传！\");\n                    console.log(this.createUploadKey(idx))\n                    console.log(this.$refs[this.createUploadKey(idx)])\n\n                    if(idx == this.specialKey) {\n                        this.$refs[this.createUploadKey(idx)].handleRemove(file, file.raw);\n                    } else {\n                        this.$refs[this.createUploadKey(idx)][0].handleRemove(file, file.raw);\n                    }\n\n                    return false;\n                }\n\n                file.id = this.createId();\n                file.headerDeleteLine = 1;\n                file.footerDeleteLine = 1;\n\n                //file.\n                if(idx == this.specialKey) {\n                    //debugger\n                    this.specialFileList = fileList;\n                    console.log(this.specialFileList)\n                } else {\n                    this.nodeList[idx].fileNum++;\n                    this.nodeList[idx].fileList = fileList;\n                }\n\n                this.tmpFileNames[idx].push(file.name);\n            };\n        },\n\n        downloadBlob(blobUrl, fileName, revokeObjectURL) {\n            let downloadElement = document.createElement('a');\n            downloadElement.href = blobUrl;\n            //下载后文件名\n            downloadElement.download = fileName;\n            console.log(fileName)\n            document.body.appendChild(downloadElement);\n            //点击下载\n            downloadElement.click();\n            //下载完成移除元素\n            document.body.removeChild(downloadElement);\n            if (revokeObjectURL == null || revokeObjectURL) {\n                //释放掉blob对象\n                window.URL.revokeObjectURL(blobUrl)\n            }\n        },\n\n        createUploadKey(idx) {\n            return 'upload' + idx;\n        },\n\n        createReplaceKey(search, replace) {\n            return search + ' = ' + replace;\n        },\n\n        createId() {\n            return this.curId++;\n        },\n\n        createDeleteKey(id, mode) {\n            return id + '-' + mode;\n        },\n\n    }\n};\n",{"version":3,"sources":["Combine.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8LA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA","file":"Combine.vue","sourceRoot":"src/components/page","sourcesContent":["<template>\r\n    <el-row :gutter=\"10\">\r\n        <el-col :span=\"18\" :offset=\"3\" class=\"wrap\">\r\n            <el-tabs v-model=\"activeName\" @tab-click=\"handleClick\">\r\n\r\n                <el-tab-pane  name=\"first\" class=\"wrap-padding\">\r\n                    <span slot=\"label\">文件替换<el-badge :value=\"totalNum\" class=\"large-btn\" :hidden=\"totalNum > 0 ? false : true\" ></el-badge></span>\r\n\r\n                    <el-col :span=\"12\" class=\"margin-bottom-10\" v-for=\"(item, idx) in nodeList\">\r\n                        <el-card class=\"box-card\">\r\n                            <div slot=\"header\" class=\"clearfix\">\r\n                                <el-col :span=\"6\">\r\n                                    <el-input v-model=\"item.search\" prefix-icon=\"el-icon-search\" placeholder=\"要替换字符\"></el-input>\r\n                                </el-col>\r\n                                <el-col :span=\"6\">\r\n                                    <el-input v-model=\"item.replace\" prefix-icon=\"el-icon-edit\" placeholder=\"替换后字符\"></el-input>\r\n                                </el-col>\r\n                                <el-badge :value=\"item.fileNum\" class=\"\" :hidden=\"item.fileNum > 0 ? false : true\">\r\n                                    <el-button v-show=\"!replaceFlag(idx)\" size=\"small\" class=\"ml-3\" type=\"primary\"\r\n                                               @click=\"doReplace(idx)\">替换\r\n                                    </el-button>\r\n                                    <el-button v-show=\"replaceFlag(idx)\" class=\"ml-3\" size=\"small\" type=\"success\">已替换</el-button>\r\n                                    <el-button size=\"small\" type=\"success\" class=\"ml-3\" @click=\"getReplaceHis(idx)\">替换历史</el-button>\r\n                                </el-badge>\r\n                                <el-button size=\"small\" type=\"primary\" class=\"margin-left-3\" @click=\"downloadFile(idx)\">下载</el-button>\r\n\r\n                            </div>\r\n                            <div class=\"content-overflow\">\r\n                                <el-upload\r\n                                        class=\"upload-demo\"\r\n                                        drag\r\n                                        :ref=\"createUploadKey(idx)\"\r\n                                        action=\"\"\r\n                                        :on-preview=\"handlePreview\"\r\n                                        :on-remove=\"handleRemove(idx)\"\r\n                                        :on-progress=\"handleProgress\"\r\n                                        :on-change=\"myHandleChange(idx)\"\r\n                                        :file-list=\"fileList\"\r\n                                        :auto-upload=\"false\"\r\n                                        multiple>\r\n                                    <i class=\"el-icon-upload\" v-show=\"item.fileNum == 0\"></i>\r\n                                    <div class=\"el-upload__text\" v-show=\"item.fileNum == 0\">将文件拖到此处，或<em>点击上传</em></div>\r\n                                </el-upload>\r\n                            </div>\r\n\r\n                        </el-card>\r\n                    </el-col>\r\n\r\n                    <el-col :span=\"12\" class=\"margin-bottom-10\">\r\n                        <div class=\"my-avatar-uploader content-overflow\" @click=\"addNode\">\r\n                            <i class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n                        </div>\r\n\r\n                        <el-row class=\"mt-10\">\r\n                            <el-badge :value=\"totalNum\" class=\"large-btn\" :hidden=\"totalNum > 0 ? false : true\" >\r\n                                <el-button type=\"danger\" size=\"medium\" class=\"large-btn\" @click=\"batchReplace\">批量替换</el-button>\r\n                            </el-badge>\r\n                        </el-row>\r\n\r\n                        <el-row class=\"mt-10\">\r\n                            <el-button type=\"primary\" size=\"medium\" class=\"large-btn\" @click=\"batchDownload\">批量下载</el-button>\r\n                        </el-row>\r\n\r\n                    </el-col>\r\n\r\n\r\n                </el-tab-pane>\r\n\r\n\r\n                <el-tab-pane label=\"文件合并\" name=\"second\">\r\n                    <el-col :span=\"10\">\r\n                        <el-form ref=\"form\" :rules=\"formRules\" :model=\"form\" label-width=\"90px\">\r\n                            <el-form-item label=\"使用替换\">\r\n                                <el-switch v-model=\"form.delivery\">\r\n                                </el-switch>\r\n                                <span style=\"color: #F56C6C;margin-left: 5px;display: inline-block;\">使用已经替换的文件或者重新上传文件</span>\r\n                            </el-form-item>\r\n                            <el-form-item label=\"上传\" v-show=\"!form.delivery\">\r\n                                <span slot=\"label\">上传<el-badge :value=\"specialNum\" :hidden=\"specialNum > 0 ? false : true\" ></el-badge></span>\r\n                                <el-upload\r\n                                        class=\"\"\r\n                                        drag\r\n                                        action=\"\"\r\n                                        :ref=\"createUploadKey(specialKey)\"\r\n                                        :on-change=\"myHandleChange(specialKey)\"\r\n                                        :on-remove=\"handleRemove(specialKey)\"\r\n                                        :auto-upload=\"false\"\r\n                                        multiple>\r\n                                    <i class=\"el-icon-upload\"></i>\r\n                                    <div class=\"el-upload__text\">\r\n\r\n                                        <p>将文件拖到此处，或<em>点击上传</em></p>\r\n                                    </div>\r\n                                </el-upload>\r\n                            </el-form-item>\r\n\r\n                            <el-form-item label=\"文件头\" prop=\"fileHeader\">\r\n                                <el-input type=\"textarea\" v-model=\"form.fileHeader\"></el-input>\r\n                            </el-form-item>\r\n\r\n\r\n                            <el-form-item label=\"文件尾\" prop=\"fileFooter\">\r\n                                <el-input type=\"textarea\" v-model=\"form.fileFooter\"></el-input>\r\n                            </el-form-item>\r\n\r\n                            <el-form-item label=\"文件名\" prop=\"fileName\">\r\n                                <el-input placeholder=\"请输入内容\" v-model=\"form.fileName\" class=\"input-with-select\">\r\n                                    <el-select v-model=\"form.fileSuffix\" slot=\"append\" placeholder=\"请选择\" prop=\"fileSuffix\">\r\n                                        <el-option\r\n                                                v-for=\"item in form.fileSuffixOptions\"\r\n                                                :key=\"item.value\"\r\n                                                :label=\"item.name\"\r\n                                                :value=\"item.value\">\r\n                                        </el-option>\r\n                                    </el-select>\r\n                                </el-input>\r\n\r\n                            </el-form-item>\r\n\r\n                            <el-form-item>\r\n                                <el-button v-show=\"form.ready\" type=\"primary\" @click=\"combineFile\">立即合并</el-button>\r\n                                <el-button v-show=\"!form.ready\" type=\"primary\" :loading=\"true\">合并中</el-button>\r\n                                <el-button @click=\"formReset()\">取消</el-button>\r\n                            </el-form-item>\r\n                        </el-form>\r\n                    </el-col>\r\n                    <el-col :span=\"14\">\r\n\r\n                        <div class=\"drag-box\">\r\n                            <div class=\"drag-box-item\">\r\n                                <el-empty v-show=\"getFileList.length == 0\" description=\"未上传文件\"></el-empty>\r\n                                <el-table-draggable handle=\".allowDrag\" @drop=\"dragChange\">\r\n                                    <el-table\r\n                                            ref=\"dragTable\"\r\n                                            :data=\"getFileList\"\r\n                                            style=\"width: 100%\" v-show=\"getFileList.length > 0\">\r\n                                        <el-table-column\r\n                                                prop=\"id\"\r\n                                                label=\"拖拽\"\r\n                                                width=\"50\">\r\n                                            <template slot-scope=\"{row}\">\r\n                                                <i class=\"el-icon-rank allowDrag\" style=\"cursor:pointer\" /> {{row.id}}\r\n                                            </template>\r\n                                        </el-table-column>\r\n                                        <el-table-column\r\n                                                prop=\"name\"\r\n                                                label=\"文件名\"\r\n                                                width=\"230\" >\r\n                                            <template slot-scope=\"scope\">\r\n                                                <span class=\"overflow-text\">{{scope.row.name}}</span>\r\n                                            </template>\r\n                                        </el-table-column>\r\n                                        <el-table-column\r\n                                                prop=\"option\"\r\n                                                label=\"操作\">\r\n                                            <template slot=\"header\" slot-scope=\"scope\">\r\n                                                <el-select class=\"\" v-model=\"dragConfig.optionVal\" placeholder=\"请选择\" size=\"mini\">\r\n                                                    <el-option\r\n                                                            v-for=\"item in dragConfig.options\"\r\n                                                            :key=\"item.value\"\r\n                                                            :label=\"item.label\"\r\n                                                            :value=\"item.value\">\r\n                                                    </el-option>\r\n                                                </el-select>\r\n\r\n                                                <el-input-number class=\" ml-3\" size=\"mini\" v-model=\"dragConfig.setVal\" controls-position=\"right\"  :min=\"0\" :max=\"10\" placeholder=\"值\"></el-input-number>\r\n\r\n                                                <el-button type=\"primary\" size=\"mini\" class=\"ml-3\" @click=\"fileConfigAdd\">加</el-button>\r\n                                                <el-button type=\"primary\" size=\"mini\" @click=\"fileConfigReduce\">减</el-button>\r\n                                            </template>\r\n                                            <template slot-scope=\"scope\">\r\n                                                <el-input-number :controls=\"false\" :ref=\"createDeleteKey(scope.row.id, 'headerDeleteLine')\" size=\"mini\" v-model=\"scope.row.headerDeleteLine\" controls-position=\"right\"  :min=\"0\"  placeholder=\"文件头删除行数\"></el-input-number>\r\n                                                <el-input-number :controls=\"false\" :ref=\"createDeleteKey(scope.row.id, 'footerDeleteLine')\" class=\"ml-3\" size=\"mini\" v-model=\"scope.row.footerDeleteLine\" controls-position=\"right\" :min=\"0\" placeholder=\"文件尾删除行数\"></el-input-number>\r\n                                            </template>\r\n\r\n                                        </el-table-column>\r\n\r\n                                    </el-table>\r\n                                </el-table-draggable>\r\n                            </div>\r\n                        </div>\r\n\r\n                    </el-col>\r\n\r\n                </el-tab-pane>\r\n            </el-tabs>\r\n        </el-col>\r\n    </el-row>\r\n</template>\r\n<script>\r\n    import ElTableDraggable from 'element-ui-el-table-draggable';\r\n\r\n    export default {\r\n        data() {\r\n            return {\r\n                activeName: 'first',\r\n                fileList: [],\r\n                tmpFileNames: [],\r\n                nodeList: [],\r\n                nodeNum: 2,\r\n                replaceHis: [],\r\n                specialFileList: [],\r\n                specialKey: 99,\r\n                form: {\r\n                    fileHeader: '',\r\n                    fileFooter: '',\r\n                    fileName: '',\r\n                    fileSuffix: \".nc\",\r\n                    fileSuffixOptions: [\r\n                        {value: \".nc\", name: \".nc\"},\r\n                        {value: \".pim\", name: \".pim\"},\r\n                    ],\r\n                    ready: true,\r\n                    delivery: true,\r\n                },\r\n                dragOptions:{\r\n                    animation: 120,\r\n                    scroll: true,\r\n                    group: 'sortlist',\r\n                    ghostClass: 'ghost-style'\r\n                },\r\n                curId: 0,\r\n                combineFileList : [\r\n                ],\r\n\r\n                dragList: [],\r\n                dragConfig: {\r\n                    optionVal: 0,\r\n                    options: [\r\n                        {value: 0, label: \"文件头删除行数\"},\r\n                        {value: 1, label: \"文件尾删除行数\"}\r\n                    ],\r\n\r\n                    setVal: 1,\r\n                },\r\n\r\n                formRules: {\r\n                    fileHeader: [\r\n                        { required: true, message: '请输入文件头', trigger: 'blur' },\r\n                    ],\r\n                    fileFooter: [\r\n                        { required: true, message: '请输入文件尾', trigger: 'change' }\r\n                    ],\r\n                    fileName: [\r\n                        { required: true, message: '请输入完整文件名', trigger: 'change', validator: (rule, value, callback) => {\r\n                            if(!this.form.fileName) {\r\n                                return callback(new Error('请输入完整文件名'));\r\n                            }\r\n\r\n                            if(this.form.fileSuffix === '') {\r\n                                return callback(new Error('请选择文件后缀'));\r\n                            }\r\n\r\n                            callback();\r\n                        }}\r\n                    ],\r\n                    fileSuffix: [\r\n                        { required: true, message: '请选择文件后缀', trigger: 'change' }\r\n                    ],\r\n                }\r\n            };\r\n        },\r\n        components:{\r\n            ElTableDraggable\r\n        },\r\n        computed: {\r\n            replaceFlag: function () {\r\n                return (idx) => {\r\n                    if (!this.nodeList.hasOwnProperty(idx)) {\r\n                        return false;\r\n                    }\r\n\r\n                    let node = this.nodeList[idx];\r\n                    let replaceKey = this.createReplaceKey(node.search, node.replace);\r\n                    return node.replaceHis.indexOf(replaceKey) != -1;\r\n                };\r\n            },\r\n            totalNum: function() {\r\n                let num = 0;\r\n                this.nodeList.map(node => {\r\n                    num += node.fileList.length;\r\n                });\r\n\r\n                return num;\r\n            },\r\n            specialNum: function() {\r\n                return this.specialFileList.length;\r\n            },\r\n            getFileList: {\r\n                get() {\r\n                    let fileList = [];\r\n\r\n                    if(this.form.delivery) {\r\n                        this.nodeList.map((node, nodeIdx) => {\r\n                            node.fileList.map((file, fileIdx) => {\r\n                                file.nodeIdx = nodeIdx;\r\n                                file.fileIdx = fileIdx;\r\n                                fileList.push(file);\r\n                            });\r\n                        });\r\n                    } else {\r\n                        //debugger\r\n                        fileList.push(...this.specialFileList);\r\n                    }\r\n\r\n                    return fileList;\r\n                },\r\n                set(value) {\r\n                    console.warn(value)\r\n                },\r\n            },\r\n            getFileBadge: function() {\r\n                return (rawName) => {\r\n                    return rawName + (this.totalNum > 0 ? '<el-badge value=\"' + this.totalNum + '\" class=\"large-btn\"  />' : '');\r\n                };\r\n            },\r\n        },\r\n        watch: {\r\n            //nodeList: {\r\n            // immediate: true,\r\n            // //deep: true,\r\n            // handler(nodeList) {\r\n            //\r\n            // }\r\n            //},\r\n        },\r\n        mounted() {\r\n            this.initNodeList();\r\n        },\r\n\r\n        methods: {\r\n            combineFile() {\r\n                this.$refs['form'].validate((valid) => {\r\n                    if (!valid) {\r\n                        return false;\r\n                    }\r\n\r\n                    let rawList = [];\r\n                    let rawIds = [];\r\n                    this.nodeList.map(node => {\r\n                        node.fileList.map(file => {\r\n                            rawIds.push(file.id);\r\n                            rawList.push(file);\r\n                        });\r\n                    });\r\n\r\n                    rawList.push(...this.specialFileList);\r\n\r\n                    if(this.dragList.length != rawList.length) {\r\n                        this.dragList = rawList;\r\n                    }\r\n\r\n                    if(this.dragList.length == 0) {\r\n                        this.$message.info('请上传要合并的文件');\r\n                        return false;\r\n                    }\r\n\r\n                    let promiseList = [];\r\n                    this.dragList.map(file => {\r\n                        //debugger\r\n                        if(this.form.delivery && rawIds.indexOf(file.id) == -1) {\r\n                            return false;\r\n                        }\r\n\r\n                        if(!this.form.delivery && rawIds.indexOf(file.id) != -1) {\r\n                            return false;\r\n                        }\r\n\r\n                        let p = this.readFile(file, res => {\r\n                            res = res.split(\"\\n\").filter(res => res);\r\n                            res.splice(0, file.headerDeleteLine);\r\n                            res.splice(res.length - file.footerDeleteLine, file.footerDeleteLine);\r\n                            return res.join(\"\\n\");\r\n                        });\r\n\r\n                        promiseList.push(p);\r\n                    });\r\n\r\n                    if(promiseList.length == 0) {\r\n                        this.$message.info('请上传文件');\r\n                        return false;\r\n                    }\r\n\r\n                    this.form.ready = false;\r\n                    Promise.all([...promiseList]).then(res => {\r\n                        console.log(res)\r\n                        res.unshift(this.form.fileHeader);\r\n                        res.push(this.form.fileFooter);\r\n                        res = res.filter(res => res);\r\n                        res = res.join(\"\\n\");\r\n\r\n                        console.log(res)\r\n                        this.form.ready = true;\r\n                        this.downloadFileByContent(res, this.form.fileName + this.form.fileSuffix);\r\n                    });\r\n\r\n                    console.log('content')\r\n                });\r\n            },\r\n\r\n            test(flag) {\r\n                return new Promise((resolve, reject) => {\r\n                    let time = Math.ceil(Math.random() * 10000);\r\n                    console.warn('执行 ' + flag);\r\n                    setTimeout(() => {\r\n                        resolve(time + '-' + flag);\r\n                    }, time);\r\n                });\r\n            },\r\n\r\n            readFile(file, callback) {\r\n                return new Promise((resolve, reject) => {\r\n                    let fileReader = new FileReader();\r\n                    fileReader.onloadend =  (event) => {\r\n\r\n                        resolve(callback(event.target.result));\r\n                    };\r\n\r\n                    fileReader.readAsText(file.raw);\r\n                });\r\n            },\r\n            fileConfigAdd() {\r\n                this.dispatchFileConfig(true);\r\n            },\r\n\r\n            fileConfigReduce() {\r\n                this.dispatchFileConfig(false);\r\n            },\r\n\r\n            dispatchFileConfig(isAdd = true) {\r\n                if(this.form.delivery) {\r\n                    this.nodeList.map(node => {\r\n                        node.fileList.map(file => {\r\n                            this.doUpdateDeletedLine(file, isAdd);\r\n                        });\r\n                    });\r\n                } else {\r\n                    this.specialFileList.map(file => {\r\n                        this.doUpdateDeletedLine(file, isAdd);\r\n                    });\r\n                }\r\n            },\r\n\r\n            doUpdateDeletedLine(file, isAdd = true) {\r\n                let key = this.dragConfig.optionVal == 0 ? 'headerDeleteLine' : 'footerDeleteLine';\r\n                file[key] = file[key] == undefined ? 0 : file[key];\r\n                if(isAdd) {\r\n                    file[key] += this.dragConfig.setVal;\r\n                } else {\r\n                    file[key] -= this.dragConfig.setVal;\r\n                }\r\n\r\n                file[key] = file[key] < 0 ? 0 : file[key];\r\n                this.updateDeletedLine(file.id, key, file[key]);\r\n            },\r\n\r\n            updateDeletedLine(id, mode, value) {\r\n                let key = this.createDeleteKey(id, mode);\r\n                this.$refs[key].setCurrentValue(value);\r\n            },\r\n\r\n            dragChange(log) {\r\n                this.dragList = log.list;\r\n                console.log(log)\r\n\r\n            },\r\n            formReset() {\r\n                this.$refs.form.resetFields();\r\n                for(let key in this.form) {\r\n                    if(key == 'fileSuffixOptions') {\r\n                        continue;\r\n                    }\r\n\r\n                    if(this.form.hasOwnProperty(key)) {\r\n                        this.form[key] = key == 'ready' || key == \"delivery\" ? true : '';\r\n                    }\r\n                }\r\n            },\r\n            removeHandle(event){\r\n                console.log(event);\r\n                this.$message.success(`从 ${event.from.id} 移动到 ${event.to.id} `);\r\n            },\r\n            addNode() {\r\n                this.nodeList.push(this.initNode());\r\n            },\r\n\r\n            batchReplace() {\r\n                this.nodeList.map((node, idx) => {\r\n                    this.doReplace(idx);\r\n                });\r\n            },\r\n\r\n            batchDownload() {\r\n                this.nodeList.map((node, idx) => {\r\n                    this.downloadFile(idx);\r\n                });\r\n            },\r\n\r\n            getReplaceHis(idx) {\r\n                if(this.nodeList[idx].replaceHis.length == 0) {\r\n                    this.$message.info('没有替换历史');\r\n                    return false;\r\n                }\r\n\r\n                let hisHtml = '';\r\n                this.nodeList[idx].replaceHis.map((his, key) => {\r\n                    hisHtml += `<p>#${key} ${his}<p>`;\r\n                });\r\n\r\n                this.$alert(hisHtml, '替换历史', {\r\n                    dangerouslyUseHTMLString: true\r\n                });\r\n            },\r\n\r\n            doReplace(idx) {\r\n\r\n                if(this.nodeList[idx].fileList.length == 0) {\r\n                    this.$message.info(\"请先上传文件！\");\r\n                    return false;\r\n                }\r\n\r\n                let node = this.nodeList[idx];\r\n                let replaceKey = this.createReplaceKey(node.search, node.replace);\r\n                node.replaceHis.push(replaceKey);\r\n\r\n                node.fileList.map(file => {\r\n                    let fileReader = new FileReader();\r\n                    fileReader.onload =  (event) => {\r\n                        //console.log(event.target.result)\r\n                        let content = event.target.result.replaceAll(node.search, node.replace);\r\n                        console.info(\"replace: \" + content);\r\n                        file.raw = new File([content], file.name, {\r\n                            name: file.name,\r\n                            size: content.length,\r\n                            type: file.type,\r\n                            lastModified: file.lastModified,\r\n                        });\r\n\r\n                        this.$message({\r\n                            message: file.name + ' 替换成功',\r\n                            type: 'success'\r\n                        });\r\n                    };\r\n\r\n                    fileReader.readAsText(file.raw);\r\n\r\n                });\r\n\r\n                this.$message({\r\n                    message: idx + '-' + replaceKey,\r\n                    type: 'success'\r\n                });\r\n            },\r\n\r\n            downloadFileByContent(content, fileName) {\r\n               let file = new File([content], fileName);\r\n               this.downloadBlob(URL.createObjectURL(file), fileName);\r\n            },\r\n\r\n            downloadFile(idx) {\r\n                if(!this.nodeList.hasOwnProperty(idx)) {\r\n                    this.$message.info(\"请上传文件！\");\r\n                    return false;\r\n                }\r\n\r\n                this.nodeList[idx].fileList.map(file => {\r\n                    let url = URL.createObjectURL(file.raw);\r\n                    let name = file.name.substring(0, file.name.lastIndexOf(\".\"));\r\n                    let suffix = file.name.substring(file.name.lastIndexOf(\".\"));\r\n                    if(this.nodeList[idx].replaceHis.length > 0) {\r\n                        name += \"(\" + this.nodeList[idx].replaceHis.join(\",\") + \")\";\r\n                    }\r\n\r\n                    console.warn(file.name)\r\n                    this.downloadBlob(url, name + suffix);\r\n                });\r\n            },\r\n            initNodeList() {\r\n                for (let i = 0; i < this.nodeNum; i++) {\r\n                    this.nodeList.push(this.initNode());\r\n                }\r\n            },\r\n            initNode() {\r\n                return {\r\n                    search: '',\r\n                    replace: '',\r\n                    fileNum: 0,\r\n                    fileList: [\r\n                        //{name: \"test.json\", uid: 55555, id:1}\r\n                    ],\r\n                    isReplace: false,\r\n                    replaceHis: [],\r\n                };\r\n            },\r\n            handleClick(tab, event) {\r\n                console.log(tab, event);\r\n            },\r\n\r\n            handleRemove(idx) {\r\n                return (file, fileList) => {\r\n                    console.log(file, fileList)\r\n                    for(var key in fileList) {\r\n                        if(file.name == fileList[key].name) {\r\n                            return false;\r\n                        }\r\n                    }\r\n\r\n                    if(idx == this.specialKey) {\r\n                        this.specialFileList = fileList;\r\n                    } else {\r\n                        this.nodeList[idx].fileNum--;\r\n                        this.nodeList[idx].fileList = fileList;\r\n\r\n                        if(fileList.length == 0) {\r\n                            this.nodeList[idx].replaceHis = [];\r\n                        }\r\n                    }\r\n\r\n                    let nameIdx = this.tmpFileNames[idx].indexOf(file.name);\r\n                    delete this.tmpFileNames[idx][nameIdx];\r\n                };\r\n            },\r\n\r\n            handlePreview(file) {\r\n                console.log(file);\r\n            },\r\n            handleProgress(event, file, fileList) {\r\n                console.log(event, file);\r\n            },\r\n\r\n            myHandleChange(idx) {\r\n                return (file, fileList) => {\r\n                    if (!this.tmpFileNames.hasOwnProperty(idx)) {\r\n                        this.tmpFileNames[idx] = [];\r\n                    }\r\n\r\n                    if (this.tmpFileNames[idx].indexOf(file.name) != -1) {\r\n                        this.$message.warning(\"出现重复文件： \" + file.name + \", 取消当前上传！\");\r\n                        console.log(this.createUploadKey(idx))\r\n                        console.log(this.$refs[this.createUploadKey(idx)])\r\n\r\n                        if(idx == this.specialKey) {\r\n                            this.$refs[this.createUploadKey(idx)].handleRemove(file, file.raw);\r\n                        } else {\r\n                            this.$refs[this.createUploadKey(idx)][0].handleRemove(file, file.raw);\r\n                        }\r\n\r\n                        return false;\r\n                    }\r\n\r\n                    file.id = this.createId();\r\n                    file.headerDeleteLine = 1;\r\n                    file.footerDeleteLine = 1;\r\n\r\n                    //file.\r\n                    if(idx == this.specialKey) {\r\n                        //debugger\r\n                        this.specialFileList = fileList;\r\n                        console.log(this.specialFileList)\r\n                    } else {\r\n                        this.nodeList[idx].fileNum++;\r\n                        this.nodeList[idx].fileList = fileList;\r\n                    }\r\n\r\n                    this.tmpFileNames[idx].push(file.name);\r\n                };\r\n            },\r\n\r\n            downloadBlob(blobUrl, fileName, revokeObjectURL) {\r\n                let downloadElement = document.createElement('a');\r\n                downloadElement.href = blobUrl;\r\n                //下载后文件名\r\n                downloadElement.download = fileName;\r\n                console.log(fileName)\r\n                document.body.appendChild(downloadElement);\r\n                //点击下载\r\n                downloadElement.click();\r\n                //下载完成移除元素\r\n                document.body.removeChild(downloadElement);\r\n                if (revokeObjectURL == null || revokeObjectURL) {\r\n                    //释放掉blob对象\r\n                    window.URL.revokeObjectURL(blobUrl)\r\n                }\r\n            },\r\n\r\n            createUploadKey(idx) {\r\n                return 'upload' + idx;\r\n            },\r\n\r\n            createReplaceKey(search, replace) {\r\n                return search + ' = ' + replace;\r\n            },\r\n\r\n            createId() {\r\n                return this.curId++;\r\n            },\r\n\r\n            createDeleteKey(id, mode) {\r\n                return id + '-' + mode;\r\n            },\r\n\r\n        }\r\n    };\r\n</script>\r\n<style>\r\n    .wrap {\r\n        border: 1px solid #ebebeb;\r\n        border-radius: 3px;\r\n        transition: .2s;\r\n        padding: 10px;\r\n        margin-top: 20px;\r\n    }\r\n\r\n    .content-overflow {\r\n        height: 200px;\r\n        overflow-y: scroll;\r\n        overflow-x: hidden;\r\n    }\r\n\r\n    .content-overflow::-webkit-scrollbar{\r\n        width: 0;\r\n    }\r\n\r\n    .margin-bottom-10 {\r\n        margin-bottom: 10px;\r\n    }\r\n\r\n    .text {\r\n        font-size: 14px;\r\n    }\r\n\r\n    .item {\r\n        margin-bottom: 18px;\r\n    }\r\n\r\n    .clearfix:before,\r\n    .clearfix:after {\r\n        display: table;\r\n        content: \"\";\r\n    }\r\n\r\n    .clearfix:after {\r\n        clear: both\r\n    }\r\n\r\n    .box-card {\r\n    }\r\n\r\n    /** upload icon*/\r\n    .my-avatar-uploader {\r\n        border: 1px dashed #d9d9d9;\r\n        border-radius: 6px;\r\n        cursor: pointer;\r\n        position: relative;\r\n        overflow: hidden;\r\n        text-align: center;\r\n    }\r\n\r\n    .my-avatar-uploader:hover {\r\n        border-color: #409EFF;\r\n    }\r\n\r\n    .my-avatar-uploader .avatar-uploader-icon {\r\n        font-size: 50px;\r\n        color: #8c939d;\r\n        text-align: center;\r\n        width: 50px;\r\n        height: 50px;\r\n        line-height: 210px;\r\n\r\n    }\r\n\r\n    .my-avatar-uploader .avatar {\r\n        width: 178px;\r\n        height: 178px;\r\n        display: block;\r\n    }\r\n\r\n    .upload-demo {\r\n        position: relative;\r\n    }\r\n\r\n    .upload-demo .el-upload {\r\n        position: absolute;\r\n        z-index: 99;\r\n        border: 0px !important;\r\n        background: none;\r\n        width: 100%;\r\n    }\r\n\r\n    .upload-demo .el-upload .el-upload-dragger {\r\n\r\n        border: 0px !important;\r\n        background: none;\r\n        width: 100%;\r\n        height: 100%;\r\n    }\r\n\r\n    .upload-demo .el-icon-close {\r\n        position: absolute;\r\n        z-index: 999;\r\n        display: block;\r\n    }\r\n\r\n\r\n    #app {\r\n        overflow: scroll;\r\n    }\r\n\r\n    .margin-left-3 {\r\n        margin-left: 3px;\r\n    }\r\n\r\n    .margin-left-10 {\r\n        margin-left: 10px;\r\n    }\r\n\r\n    .ml-3 {\r\n        margin-left: 3px !important;\r\n    }\r\n    .mt-10 {\r\n        margin-top: 10px;\r\n    }\r\n\r\n    .mb-3 {\r\n        margin-bottom: 3px;\r\n    }\r\n\r\n    .large-btn {\r\n        width: 100%;\r\n    }\r\n\r\n\r\n    .drag-box{\r\n        display: flex;\r\n        user-select: none;\r\n    }\r\n    .drag-box-item {\r\n        flex: 1;\r\n        background-color: #eff1f5;\r\n        margin-right: 16px;\r\n        border-radius: 6px;\r\n        border: 1px #e1e4e8 solid;\r\n    }\r\n    .item-title{\r\n        padding: 8px 8px 8px 12px;\r\n        font-size: 14px;\r\n        line-height: 1.5;\r\n        color: #24292e;\r\n        font-weight: 600;\r\n    }\r\n    .item-ul{\r\n        padding: 0 8px 8px;\r\n        max-height: 1000px;\r\n        overflow-y: scroll;\r\n    }\r\n    .item-ul::-webkit-scrollbar{\r\n        width: 0;\r\n    }\r\n\r\n    .overflow-text {\r\n        display: block;\r\n        color: #606266;\r\n        overflow: hidden;\r\n        max-width: 250px;\r\n        padding-left: 4px;\r\n        text-overflow: ellipsis;\r\n        transition: color .3s;\r\n        white-space: nowrap;\r\n        line-height: 30px;\r\n    }\r\n\r\n    .drag-list {\r\n        border: 1px #e1e4e8 solid;\r\n        padding: 10px;\r\n        margin: 5px 0 10px;\r\n        list-style: none;\r\n        background-color: #fff;\r\n        border-radius: 6px;\r\n        cursor: pointer;\r\n        -webkit-transition: border .3s ease-in;\r\n        transition: border .3s ease-in;\r\n    }\r\n    .drag-list:hover {\r\n        border: 1px solid #20a0ff;\r\n    }\r\n    .drag-title {\r\n        font-weight: 400;\r\n        line-height: 25px;\r\n        margin: 10px 0;\r\n        font-size: 22px;\r\n        color: #1f2f3d;\r\n    }\r\n    .ghost-style{\r\n        display: block;\r\n        color: transparent;\r\n        border-style: dashed\r\n    }\r\n\r\n    .el-select .el-input {\r\n        width: 130px;\r\n    }\r\n\r\n    .el-message-box {\r\n        z-index: 99999;\r\n        position: relative;\r\n    }\r\n\r\n    .min-with-80 {\r\n        width: 80px;\r\n    }\r\n\r\n    .el-upload--text {\r\n        border: 0;\r\n    }\r\n\r\n</style>\r\n"]}]}