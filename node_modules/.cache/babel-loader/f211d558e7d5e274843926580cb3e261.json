{"remainingRequest":"/data/www/combine/node_modules/babel-loader/lib/index.js!/data/www/combine/node_modules/cache-loader/dist/cjs.js??ref--0-0!/data/www/combine/node_modules/vue-loader/lib/index.js??vue-loader-options!/data/www/combine/src/components/common/AccountsTestUnit.vue?vue&type=script&lang=js&","dependencies":[{"path":"/data/www/combine/src/components/common/AccountsTestUnit.vue","mtime":1618905572735},{"path":"/data/www/combine/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/data/www/combine/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/data/www/combine/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/data/www/combine/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _toConsumableArray from \"/data/www/combine/node_modules/@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport MyPrism from \"./MyPrism\";\nexport default {\n  props: {\n    title: {\n      type: String,\n      default: ''\n    },\n    func: {\n      type: String,\n      default: ''\n    },\n    rules: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    },\n    options: {\n      type: Object,\n      default: function _default() {\n        return {};\n      }\n    }\n  },\n  data: function data() {\n    var _this = this;\n\n    return {\n      num: 0,\n      plugins: ['line-numbers'],\n      targetFunc: null,\n      result: {},\n      //form-create\n      fApi: {},\n      fOptions: {},\n      fRules: [],\n      defaultRules: [{\n        type: 'el-button',\n        field: 'submitBtn',\n        on: {\n          click: function click() {\n            //TODO 提交表单\n            _this.onSubmit(_this.fApi);\n          }\n        },\n        props: {\n          type: 'primary'\n        },\n        col: {//span:3,\n          //spush: 1\n        },\n        children: ['提交']\n      }],\n      defaultOptions: {\n        form: {\n          //行内表单模式\n          inline: true,\n          labelWidth: 'auto'\n        },\n        row: {//justify: 'start',\n        },\n        submitBtn: false\n      }\n    };\n  },\n  components: {\n    MyPrism: MyPrism\n  },\n  computed: {\n    curFunc: function curFunc() {}\n  },\n  created: function created() {\n    var _this$fRules, _this$fRules2;\n\n    //console.log('unit create ................');\n    (_this$fRules = this.fRules).push.apply(_this$fRules, _toConsumableArray(this.rules));\n\n    (_this$fRules2 = this.fRules).push.apply(_this$fRules2, _toConsumableArray(this.defaultRules));\n\n    this.fOptions = Object.assign(this.options, this.defaultOptions);\n  },\n  mounted: function mounted() {},\n  methods: {\n    enableSubmit: function enableSubmit() {\n      var flag = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      this.fApi.disabled(!flag, 'submitBtn');\n    },\n    onSubmit: function onSubmit(fApi) {\n      var _this2 = this;\n\n      fApi.validate(function (valid) {\n        if (!valid) {\n          return false;\n        }\n\n        var func = _this2.func;\n\n        if (fApi.form.func) {\n          func = fApi.form.func;\n        }\n\n        if (!_this2.checkFunc(func)) {\n          return false;\n        }\n\n        console.log(_this2.targetFunc);\n\n        _this2.enableSubmit(false);\n\n        _this2.targetFunc(fApi.form).then(function (res) {\n          console.log(res);\n\n          if (res.code && res.code != 200) {\n            _this2.$notify({\n              title: '错误',\n              message: \"#\".concat(_this2.$props.func, \"\\u83B7\\u53D6\\u5931\\u8D25 <br /> \").concat(res.msg),\n              type: 'error'\n            });\n\n            _this2.result = res.payload;\n            return false;\n          }\n\n          _this2.result = res.payload;\n\n          _this2.$notify({\n            title: '成功',\n            message: \"#\".concat(_this2.$props.func, \"  \\u83B7\\u53D6\\u6210\\u529F\"),\n            type: 'success'\n          });\n        }).finally(function () {\n          _this2.enableSubmit(true);\n        });\n      });\n    },\n    checkFunc: function checkFunc(func) {\n      var tmp = require(\"../../api/accounts\");\n\n      if (!tmp || !tmp[func]) {\n        this.targetFunc = null;\n        this.$notify.error({\n          title: '错误',\n          message: func + ' 方法找不到！'\n        });\n        return false;\n      }\n\n      this.targetFunc = tmp[func];\n      return true;\n    }\n  }\n};",{"version":3,"sources":["AccountsTestUnit.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <div>\r\n        <el-card class=\"box-card\">\r\n            <div slot=\"header\" class=\"clearfix\">\r\n                <span><span class=\"font-bold\">{{title}}</span> {{func}}</span>\r\n            </div>\r\n\r\n            <form-create v-model=\"fApi\" :rule=\"fRules\" :option=\"fOptions\" class=\"mt-10\"></form-create>\r\n            <el-collapse value=\"1\">\r\n                <el-collapse-item>\r\n                    <template slot=\"title\">\r\n                        代码\r\n                    </template>\r\n                    <my-prism  :plugins=\"plugins\" style=\"height: 300px;overflow-y: auto\"><slot name=\"u-code\"></slot></my-prism>\r\n                </el-collapse-item>\r\n                <el-collapse-item name=\"1\">\r\n                    <template slot=\"title\" >\r\n                        结果 <!--<i class=\"header-icon el-icon-lock\"></i>-->\r\n                    </template>\r\n                    <json-viewer :value=\"result\" :expand-depth=\"5\" style=\"\" copyable></json-viewer>\r\n                </el-collapse-item>\r\n            </el-collapse>\r\n        </el-card>\r\n    </div>\r\n</template>\r\n\r\n\r\n<script>\r\n    import MyPrism from \"./MyPrism\";\r\n    export default {\r\n        props: {\r\n            title: {\r\n                type: String,\r\n                default: '',\r\n            },\r\n            func: {\r\n                type: String,\r\n                default: '',\r\n            },\r\n            rules: {\r\n                type: Array,\r\n                default: function() {\r\n                    return [];\r\n                },\r\n            },\r\n            options: {\r\n                type: Object,\r\n                default: function() {\r\n                    return {};\r\n                },\r\n            },\r\n        },\r\n        data () {\r\n            return {\r\n                num: 0,\r\n                plugins: ['line-numbers'],\r\n                targetFunc: null,\r\n                result: {},\r\n\r\n                //form-create\r\n                fApi: {},\r\n                fOptions: {},\r\n                fRules: [],\r\n                defaultRules: [\r\n                    {\r\n                        type: 'el-button',\r\n                        field: 'submitBtn',\r\n                        on: {\r\n                            click: () => {\r\n                                //TODO 提交表单\r\n                                this.onSubmit(this.fApi);\r\n                            }\r\n                        },\r\n                        props: {\r\n                            type: 'primary',\r\n                        },\r\n                        col: {\r\n                            //span:3,\r\n                            //spush: 1\r\n                        },\r\n                        children: ['提交']\r\n\r\n                    }\r\n                ],\r\n                defaultOptions: {\r\n                    form: {\r\n                        //行内表单模式\r\n                        inline: true,\r\n                        labelWidth: 'auto',\r\n                    },\r\n                    row: {\r\n                        //justify: 'start',\r\n                    },\r\n                    submitBtn: false,\r\n                },\r\n            }\r\n        },\r\n        components: {\r\n            MyPrism\r\n        },\r\n        computed: {\r\n            curFunc() {\r\n\r\n            },\r\n        },\r\n        created() {\r\n            //console.log('unit create ................');\r\n            this.fRules.push(...this.rules);\r\n            this.fRules.push(...this.defaultRules);\r\n            this.fOptions = Object.assign(this.options, this.defaultOptions);\r\n        },\r\n        mounted() {\r\n\r\n\r\n        },\r\n        methods: {\r\n            enableSubmit(flag = true) {\r\n                this.fApi.disabled(!flag, 'submitBtn');\r\n            },\r\n            onSubmit(fApi) {\r\n                fApi.validate((valid) => {\r\n                    if(!valid) {\r\n                        return false;\r\n                    }\r\n\r\n                    let func = this.func;\r\n                    if(fApi.form.func)\r\n                    {\r\n                        func = fApi.form.func;\r\n                    }\r\n\r\n                    if(!this.checkFunc(func))\r\n                    {\r\n                        return false;\r\n                    }\r\n\r\n                    console.log(this.targetFunc);\r\n\r\n                    this.enableSubmit(false);\r\n                    this.targetFunc(fApi.form).then(res => {\r\n                        console.log(res);\r\n                        if(res.code && res.code != 200) {\r\n                            this.$notify({\r\n                                title: '错误',\r\n                                message: `#${this.$props.func}获取失败 <br /> ${res.msg}`,\r\n                                type: 'error'\r\n                            });\r\n                            this.result = res.payload;\r\n                            return false;\r\n                        }\r\n\r\n                        this.result = res.payload;\r\n                        this.$notify({\r\n                            title: '成功',\r\n                            message: `#${this.$props.func}  获取成功`,\r\n                            type: 'success'\r\n                        });\r\n                    }).finally(() => {\r\n                        this.enableSubmit(true);\r\n                    });\r\n                });\r\n            },\r\n\r\n            checkFunc(func) {\r\n                let tmp = require('../../api/accounts');\r\n                if(!tmp || !tmp[func])\r\n                {\r\n                    this.targetFunc = null;\r\n                    this.$notify.error({title: '错误', message: func + ' 方法找不到！'});\r\n                    return false;\r\n                }\r\n\r\n                this.targetFunc = tmp[func];\r\n                return true;\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    h1{\r\n        text-align: center;\r\n        margin: 30px 0;\r\n    }\r\n    p{\r\n        line-height: 30px;\r\n        margin-bottom: 10px;\r\n        text-indent: 2em;\r\n    }\r\n    .logout{\r\n        color: #409EFF;\r\n    }\r\n    .mt-5 {\r\n        margin-top: 5px;\r\n    }\r\n    .mt-10 {\r\n        margin-top: 5px;\r\n    }\r\n    .font-bold {\r\n        font-weight: bold;\r\n    }\r\n\r\n</style>\r\n"],"sourceRoot":"src/components/common"}]}